<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><title>Untitled Document</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head><body><p><font size="5" face="Arial, Helvetica, sans-serif"></font></p><table width="765" border="0">  <tr>     <td width="379"><font size="5" face="Arial, Helvetica, sans-serif"><strong><em><font color="#006600">LastWave</font></em>       Package Kernel 2.0</strong></font></td>    <td width="60"><strong><font color="#000000" size="3" face="Arial, Helvetica, sans-serif"><a href="#AUTHOR">Author</a></font></strong></td>    <td width="90"> <strong><font color="#000000" size="3" face="Arial, Helvetica, sans-serif"><a href="#DESCRIPTION">Description</a></font></strong></td>    <td width="90"> <strong><font color="#000000" size="3" face="Arial, Helvetica, sans-serif"><a href="#EXAMPLES">Examples</a></font></strong></td>  </tr></table><h2>   <center>    <hr>    <div align="left"><font size="3" face="Arial, Helvetica, sans-serif"><a name="AUTHOR" id="AUTHOR"></a>Author:</font>     </div>  </center></h2><ul>  <li>    <h3><font size="3" face="Arial, Helvetica, sans-serif"><font color="#000000"><a href="../../../index.html" target="_parent">Emmanuel       Bacry</a></font></font><font size="2"><font face="Arial, Helvetica, sans-serif"><br>      <i>Centre de Math&eacute;matiques Appliqu&eacute;es<br>      Ecole Polytechnique 91128 Palaiseau Cedex - France</i></font></font></h3>  </li></ul><hr><p><font size="3" face="Arial, Helvetica, sans-serif"><strong><a name="DESCRIPTION"></a>Description</strong></font></p><blockquote>   <p>The kernel package is the core of LastWave. It mainly includes</p>  <ul>    <li>the parser and the structure of the command language</li>    <li>basic commands</li>    <li>definition of the basic types such as strings (&amp;str), numbers (&amp;num,&amp;float,&amp;int),       list of values (&amp;listv, i.e., list of object of arbitrary type) etc...</li>    <li>basic graphic management</li>  </ul></blockquote><hr><p><font size="3" face="Arial, Helvetica, sans-serif"><strong><a name="EXAMPLES" id="EXAMPLES"></a>Examples</strong></font></p><p><font size="3" face="Arial, Helvetica, sans-serif"><strong><br>  </strong>For examples about LastWave Graphic features you should look at the   examples in the numerical packages and read the <a href="../download_doc.html" target="_parent">LastWave   documentation</a></font></p><table width="741" border="0">  <tr>     <td colspan="2"><font size="2" face="Arial, Helvetica, sans-serif"><strong>Basics</strong></font></td>    <td>&nbsp;</td>    <td colspan="2"><font size="2" face="Arial, Helvetica, sans-serif"><strong>Strings</strong></font></td>  </tr>  <tr>     <td width="23">&nbsp;</td>    <td width="140"><a href="#B1">The command line</a></td>    <td width="37">&nbsp;</td>    <td width="34">&nbsp;</td>    <td width="485"><a href="#S1">Basic manipulation</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td><a href="#B2">The [...] syntax</a></td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td><a href="#S2">Extraction (Get)</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td><a href="#S3">Extraction (Set)</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td><a href="#S4">Wild cards</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>  </tr></table><table width="741" border="0">  <tr>     <td colspan="2"><font size="2" face="Arial, Helvetica, sans-serif"><strong>Listv       (list of values)</strong></font></td>    <td>&nbsp;</td>    <td colspan="2"><font size="2" face="Arial, Helvetica, sans-serif"><strong>Arrays</strong></font></td>  </tr>  <tr>     <td width="22">&nbsp;</td>    <td width="140"><a href="#L1">Basic manipulation</a></td>    <td width="40">&nbsp;</td>    <td width="33">&nbsp;</td>    <td width="484"><a href="#A1">Basic manipulation</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td><a href="#L2">Extraction (Set/Get)</a></td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td><a href="#A2">Indirect access using the syntax</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td><a href="#S3">Extraction (Set)</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td><a href="#S4">Wild cards</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>  </tr></table><table width="741" border="0">  <tr>     <td colspan="2"><font size="2" face="Arial, Helvetica, sans-serif"><strong><a href="#LO1">The       <em>foreach</em> loop</a></strong></font></td>    <td>&nbsp;</td>    <td colspan="2"><font size="2" face="Arial, Helvetica, sans-serif"><strong>Commands</strong></font></td>  </tr>  <tr>     <td width="23">&nbsp;</td>    <td width="139">&nbsp;</td>    <td width="39">&nbsp;</td>    <td width="33">&nbsp;</td>    <td width="485"><a href="#C1">Defining new commands</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td><a href="#C2">Optional arguments</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td><a href="#C3">Type of arguments</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td><a href="#C4">Variable number of arguments</a></td>  </tr>  <tr>     <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td>&nbsp;</td>    <td><a href="#C5">Anonymous commands</a></td>  </tr></table><p>&nbsp;</p><hr><p><strong><a name="S1"></a>Basics: The command line<br>  </strong>Syntaxically a command line is just a list of <em>words</em>, the first   word being the command name and the other words the arguments. Each word is   separated using either the space character, the new line character or the carriage   return character. Moreover no word separation occurs within <em>{...} </em>(block   separation)<em> </em>, <em>(...)</em> (expression grouping), <em>'...'</em>   (used for strings), <em>&quot;...&quot; </em>(same as <em>'...'</em>)<em> </em>,   `...` (see manual) and [...] <br>  Thus for instance the command <strong>setv </strong>can be used to set a variable.   The first argument is the name of the variable and the second one the value   it should be set to, e.g.,<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; setv   x 2<br>  = 2<br>  a&gt; setv s&quot;hello&quot;<br>  = &quot;hello&quot;<br>  The print command lets you print a variable<br>  a&gt; print x<br>  x= 2<br>  a&gt; print s<br>  s=&quot;hello&quot;</font><br>  Actually, you can directly type in an expression instead of a command line LastWave   returns its evaluation, e.g.,<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; x<br>  = 2<br>  a&gt; x+10<br>  = 12<br>  a&gt; s<br>  = &quot;hello&quot;<br>  a&gt; s+&quot; &quot;+s<br>  =&quot;hello hello&quot;</font><br>  Moerover the = syntax can be used instead of the setv command, e.g.,<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; x=3<br>  = 3<br>  a&gt; x*=2<br>  = 6<br>  a&gt; x<br>  = 6<br>  a&gt; s=&quot;hello&quot;<br>  = &quot;hello&quot;<br>  a&gt; s*=2<br>  = &quot;hellohello&quot;</font><br>  Some commands have actions associated to them. Their behavior depends on the   action, e.g., (conversion string to/from ascii codes)<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; str   2ascii &quot;hello&quot;<br>  = {104 101 108 108 111} <br>  a&gt; str ascii2 {104 101 108 108 111}<br>  = &quot;hello&quot;</font></p><p><br>  <a name="B2"><strong>Basics: </strong></a><strong>The <em>[...]</em> syntax<br>  </strong>If the argument a command must be evaluated and if this argument is   surrounded by brackets, whatever is between brackets is considered as a command   line which is evaluated. The resut of this evaluation is the value of the argument.<strong>   </strong>Thus<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; l   = [str 2ascii &quot;hello&quot;]<br>  = {104 101 108 108 111} <br>  a&gt; h = [str ascii2 l]*2<br>  = &quot;hellohello&quot;<br>  a&gt; h<br>  = &quot;hellohello&quot;</font></p><p>&nbsp;</p><hr><p><strong><a name="S1"></a>Strings: Basic manipulation</strong><br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; x   = &quot;this is&quot;<br>  = 'this is'<br>  a&gt; type(x)<br>  = '&amp;string'<br>  a&gt; x.length<br>  = 7<br>  a&gt; x+' a concatenation'<br>  = 'this is a concatenation'<br>  a&gt; x*3<br>  = 'this isthis isthis is'<br>  a&gt; (x*2 == x+x)<br>  = 1<br>  a&gt; x<br>  = 'this is'<br>  a&gt; x+=' what'<br>  = 'this is what'<br>  a&gt; x<br>  = 'this is what'</font><strong><br>  </strong></p><p><strong><a name="S2"></a>Strings: Extraction (Get)</strong><br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; s='abcdef'<br>  = 'abcdef'<br>  a&gt; s[1,3,5]<br>  = 'bdf'<br>  a&gt; s[1:2:5]<br>  = 'bdf'<br>  a&gt; s[5:-1:0]<br>  = 'fedcba'<br>  a&gt; s[1:2:]<br>  = 'bdf'<br>  a&gt; s[:-1:]<br>  = 'fedcba'<br>  a&gt; s[1:3,0,0,1:2:]<br>  = 'bcdaabdf'</font><br>  You can use periodic border effects (there are many more!)<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  a&gt; s[*bper,-1:10]<br>  = 'fabcdefabcde'</font><br>  Between the [] you can put signals or listvs made of integers. Thus, for instance,   if you want to randomly choose 10 characters from that string (allowing repetitions)   you can do<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; s[int(Urand(10)*s.length)]<br>  = 'cefcabfdef'</font></p><p> <strong><a name="S3"></a>Strings: Extraction (Set)</strong><br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; s = 'hello'<br>  = 'hello'<br>  a&gt; s[1,2] = 'ELL'<br>  ** Error : String lengths do not match<br>  --&gt; s[1,2] = 'ELL'<br>  a&gt; s[1,2] = 'EL'<br>  = 'hELlo'<br>  a&gt; s = 'hello'<br>  = 'hello'</font><br>  Using a listv on the right handside lets you set block of characters<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; s[3:4] = {'p'}<br>  = 'help'<br>  a&gt; s[0,3:4] = {'la b' 'la donna'}<br>  = 'la bella donna'<br>  To erase the first word, you could simply do<br>  a&gt; s[0:2] = {''}<br>  = 'bella donna'</font></p><p><strong><a name="S4"></a>Strings: Wild cards</strong><br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; l = 'hello hello baby'<br>  = 'hello hello baby'</font><br>  Looking for <em>b</em> or <em>e</em> characters<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; str match l '[be]'<br>  = {1 7 12 14}</font><br>  Replacing them by the <em>X</em> character (the <strong>:=</strong> is necessary   whenever the size of the two handsides do not match)<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; l[[str match l '[be]']] :=   'X'<br>  = 'hXllo hXllo XaXy'<br>  a&gt; l = 'hello hello baby'<br>  = 'hello hello baby'</font><br>  Looking for a <em>b</em> character that follows an <em>a</em> (the <strong>|...|</strong>   syntax specify what the returned ranges should correspond to)<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; l[[str match l 'a|b|']] :=   'B'<br>  = 'hello hello baBy'</font><br>  There are many other wild cards... you should read the documentation.</p><hr><p><strong><a name="L1" id="L1"></a>Listvs: Basic manipulation</strong><font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  a&gt; {'a listv' 'made' 'of' 4 'elements'}<br>  = {'a listv' 'made' 'of' 4 'elements'}<br>  a&gt; type({1 're'})<br>  = '&amp;listv'<br>  a&gt; {}<br>  = {}<br>  a&gt; l = {'like' {'this' 'listv'} &lt;1,2&gt;}<br>  = {'like' {length=2} &lt;1,2&gt;}<br>  a&gt; type(l[0])<br>  = '&amp;string'<br>  a&gt; type(l[1])<br>  = '&amp;listv'<br>  a&gt; type(l[2])<br>  = '&amp;signali'<br>  a&gt; x={'a' 1}<br>  = {'a' 1}<br>  a&gt; x+='b'+2<br>  = {'a' 1 'b' 2}<br>  a&gt; x+='c'+3<br>  = {'a' 1 'b' 2 'c' 3}<br>  a&gt; x*=2<br>  = {'a' 1 'b' 2 'c' 3 'a' 1 'b' 2 'c' 3}<br>  a&gt; x={'a' 1}<br>  = {'a' 1}<br>  a&gt; x+x<br>  = {'a' 1 'a' 1}<br>  a&gt; x+{x}<br>  = {'a' 1 {'a' 1}}<br>  a&gt; l = {'a' 1}<br>  = {'a' 1}<br>  a&gt; l.length<br>  = 2<br>  a&gt; l.length=7<br>  = 7<br>  a&gt; l<br>  = {'a' 1 0 0 0 0 0}<br>  </font></p><p><strong><a name="L2" id="L2"></a>Listvs: Extraction (set/get)</strong><font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  a&gt; l = {'a' 1}<br>  = {'a' 1}<br>  a&gt; l[0]<br>  = 'a'<br>  a&gt; l[0] = 12<br>  = 12<br>  a&gt; l<br>  = {12 1}<br>  </font><font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt;   l = {'a' 1 {1 2}}<br>  = {'a' 1 {1 2}}<br>  a&gt; {e f g}=l<br>  = {'a' 1 {1 2}}<br>  a&gt; e<br>  = 'a'<br>  a&gt; f<br>  = 1<br>  a&gt; g<br>  = {1 2} <br>  </font></p><hr><p><strong><a name="A1" id="A1"></a>Arrays: Basic manipulation<br>  </strong>LastWave lets you manipulate arrays of values indexed by strings.<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; tab.1='one' <br>  = 'one'<br>  a&gt; tab.2='two'<br>  = 'two'<br>  a&gt; tab.3='three'<br>  = 'three'<br>  a&gt; tab.total=6<br>  = 6<br>  a&gt; tab.subarray.list={1 2 3}<br>  = {1 2 3}</font><br>  To print in a &quot;nice&quot; way arrays or listv you can use the <strong>nice</strong>   command<br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt; nice tab<br>  -&gt; 1 : 'one'<br>  -&gt; 2 : 'two'<br>  -&gt; 3 : 'three'<br>  -&gt; subarray :<br>  ....... -&gt; list :<br>  .............. -&gt; 0 : 1<br>  ..............-&gt; 1 : 2<br>  ..............-&gt; 2 : 3<br>  -&gt; total : 6</font></p><p></p><p><a name="A2"></a><strong>Arrays: Indirect access using the  syntax<br>  </strong>The  syntax lets you make string substitution before the expression   is executed. You can use it to perform indirect access on arrays:<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  a&gt; tab.1='one' <br>  = 'one'<br>  a&gt; tab.2='two'<br>  = 'two'<br>  a&gt; tab.3='three'<br>  = 'three'<br>  a&gt; index=3<br>  = 3<br>  a&gt; tab.index<br>  'three'<br>  a&gt; tab.index=4<br>  =4<br>  a&gt; tab.index<br>  4</font></p><hr><p><strong><a name="LO1"></a>The <em>foreach</em> loop</strong><br>  The <strong>foreach </strong>command lets you loop on various objects such as   listv, ranges or signals. Here are some examples<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  a&gt; l = {}<br>  = {}<br>  a&gt; foreach i 1:10 {l+=i}<br>  a&gt; l<br>  = {1 2 3 4 5 6 7 8 9 10}<br>  </font><font color="#000000">or<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  </font></font><font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt;   l = {}<br>  = {}<br>  a&gt; foreach r Grand(10) {<br>  --&gt; l+=r<br>  --&gt; }<br>  a&gt; l<br>  = {0.067469 -0.0630144 0.356936 1.45415 -0.320958 0.804815 -0.739786 -2.00512   -1.39016 -0.69139}<br>  </font><font color="#000000">or<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  </font></font><font color="#006600" size="2" face="Times New Roman, Times, serif">a&gt;   p = 1<br>  = 1<br>  a&gt; s=0<br>  = 0<br>  a&gt; foreach e l {<br>  --&gt; p*=e<br>  --&gt; s+=e<br>  --&gt; }<br>  a&gt; p<br>  = 0.000812681<br>  a&gt; s<br>  = -2.52705<br>  </font></p><hr><p><strong><a name="C1"></a>Commands: Defining new commands</strong><br>  <font color="#006600" size="2" face="Times New Roman, Times, serif">setproc   my {n} {<br>  return n+1<br>  }<br>  a&gt; my 10<br>  = 11<br>  </font><font color="#000000">You can specify the usage and a one line help (that   will be used by the interactivel help system)</font><font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  setproc my {n} &quot;{{{&lt;n&gt;} {Returns &lt;n&gt;+1}}}&quot; {<br>  return n+1<br>  }</font></p><p><strong><a name="C2" id="C2"></a>Commands: Optional arguments<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  </font></strong><font color="#006600" size="2" face="Times New Roman, Times, serif">setproc   my {i {n 1}} {<br>  return i+n<br>  }<br>  a&gt; my 10<br>  = 11<br>  a&gt; my 10 2<br>  = 12<br>  a&gt; my 'ab' 'cd'<br>  = 'abcd'</font></p><p><strong><a name="C3" id="C3"></a>Commands: Type of arguments<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  </font></strong><font color="#006600" size="2" face="Times New Roman, Times, serif">setproc   my {{&amp;num i} {&amp;num n 1}} {<br>  return i+n<br>  }<br>  a&gt; my 'ab' 'cd'<br>  ** Error : Bad type '&amp;num' for argument ''ab''<br>  </font><font color="#000000">The <strong>&amp;word</strong> type allows not   to evaluate the argument. This can be used to specify <em>actions</em> associated   to commands, e.g.,<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  </font></font><font color="#006600" size="2" face="Times New Roman, Times, serif">setproc   my {{&amp;word action} i} {<br>  if (action=='str') {<br>  if ([val type i]=='&amp;string') {return i+'1'}<br>  errorf 'Bad type %s for second argument' [val type i]<br>  }<br>  if (action=='num') {<br>  if ([val type i]=='&amp;num') {return i+1}<br>  errorf 'Bad type %s for second argument' [val type i]<br>  }<br>  errorf 'unknown action %s' action<br>  }</font></p><p><strong><a name="C4" id="C4"></a>Commands: Variable number of arguments<br>  </strong>The <em>.l</em> argument corresponds to a listv made of all the remaining   arguments<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  </font><font color="#006600" size="2" face="Times New Roman, Times, serif">setproc   my {arg1 .l} {<br>  printf 'arg1=%V, l=%V\n' arg1 l<br>  }<br>  a&gt; my 1 2<br>  arg1=1, l={2}<br>  a&gt; my 1 2 'e'<br>  arg1=1, l={2 'e'}<br>  a&gt; my 1<br>  arg1=1, l={}<br>  </font></p><p><strong><a name="C5" id="C5"></a>Commands: Anonymous commands<br>  </strong>Regular command<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  a&gt; setproc my{} {return 1}<br>  = %my<br>  a&gt; type(%my)<br>  = '&amp;proc'<br>  the string '\texttt{&amp;proc}'.<br>  </font>Anonymous command<font color="#006600" size="2" face="Times New Roman, Times, serif"><br>  a&gt; c = %{n m}`return n+m`<br>  = %&lt;0x23740c40&gt; <br>  a&gt; apply args c 1 10<br>  = 11<br>  a&gt; apply listv c {1 10}<br>  = 11<br>  a&gt; listv sort {1 2 7 26 3 5 42 7 1} %{e1 e2}`return e1%2-e2%2`<br>  = {1 7 1 3 5 7 42 26 2}<br>  setproc generate {{&amp;int n}} {<br>  return %{x}`return x*\n`<br>  }<br>  a&gt; c = [generate 3]<br>  = %&lt;0x2380d0a8&gt;<br>  a&gt; apply args c 9<br>  = 27<br>  a&gt; apply args c 'e'<br>  = 'eee'<br>  </font></p><hr><p><font color="#006600" size="2" face="Times New Roman, Times, serif"> </font></p><p><br>  <br></p></body></html>